<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Blue Sun</title>
    <style>
        /* Blog Articles Template */
        .article_title{
            padding: 50px 20px 10px;
            font-size: 30px;
            font-weight: 400;

            text-align: center;
        }
        .article_info >*{
            display: inline;
        }
        .article_info{
            color: #666;
            display: block;
            text-align: center;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 20px;
        }
        .article_content{
            padding: 40px 40px 50px
        }
    </style>
</head>
<body>
<div class="article_title"> 你好，我是一个伪数组</div>
<div class="article_info">
    <div class="article_info_date">时间：<span> 2014-9-16 15:46</span></div>
    <div class="article_info_author">作者：<span> JerryC</span></div>
</div>
<div class="article_content">
    <p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	数组在JS里是一种神奇的存在，就像你所知道的一样，typeof([1,2])的结果是"object"。
</p>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	说到这里就不得不提到JS里的五种基本数据类型（不考虑function）：undefined、null、boolean、number、string。和第六种复杂的数据类型object。object本质是一组由键值构成的对象，我们所熟知的dom节点、数组、正则都隶属于object。
</p>
<h2 id="" style="font-weight:400;font-size:20px;color:#333333;font-family:'Microsoft Yahei';background-color:#FFFFFF;">
	尝试做件事情
</h2>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	在富javascript应用里，js管理数据是相当常见的，一般存储数据时会使用这种方式（以用户列表为例）
</p>
<pre>var users = [
  {'id' : 1001, 'name' : 'Jack', 'age' : 23},
  {'id' : 1002, 'name' : 'Joys', 'age' : 18},
  {'id' : 1003, 'name' : 'Gate', 'age' : 34}
];</pre>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	为了是创建的用户信息更符合业务需求，于是乎我们很容易写出下面这个类
</p>
<pre>//用户类
function USERS(){
  this.users = [];
}
users.prototype['add'] = function(item){
  //对item执行校验，过滤等操作
  //……
  this.users.push(item)
};</pre>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	这种数据模型已经可以很高效的工作了，但是站在使用者的视角来看（见下一个code），操作用户信息时的深度是不是还能再降低一点呢？能不能让实例化后的对象，就是数据本身，而非将数据挂载到users属性下呢？
</p>
<pre>//实例化一个对象
var myUserList = new USERS();
myUserList.add({'id' : 1001, 'name' : 'Jack', 'age' : 23});
//读取第一条用户信息
console.log(myUserList.users[0]);</pre>
<h2 id="" style="font-weight:400;font-size:20px;color:#333333;font-family:'Microsoft Yahei';background-color:#FFFFFF;">
	伪数组开始啦
</h2>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	终于扯到<strong>伪数组</strong>啦。要做到实例化后的对象，最直观地以数组的形式呈现，这就涉及到如何把对象伪装成数组。
</p>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	这里提到的伪数组是指。<strong>对象具有length属性，且值为数字（包含字符类型的数字）</strong>，以及从零开始的有序下标。如下面这个变量arr，一个赤裸裸的对象，却是一个最标准的伪数组。
</p>
<pre>var arr = {
  '0' : '000',
  '1' : '111',
  '2' : '222',
  'length' : 3,
  'name' : 'an object looks like array',
  'type' : 'object'
}
$.each(arr,function(key,value){
  console.log(key,value)
});
 /**
  * 打印结果，并不包括length、name、type属性
  *  0,000
  *  1,111
  *  2,222
  **/</pre>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	看到这里应该就豁然开朗了，只要严格遵循length与下标在数组中的逻辑，就可以轻松地构建出一个伪数组，那如何在类的定义时就构建为伪数组，小剧来改写一下USERS类。
</p>
<pre>//用户类
function USERS(){
  //初始化长度
  length = 0;
}
//修改原型对象为数组
users.prototype = [];
users.prototype['add'] = function(item){
  //对item执行校验，过滤等操作
  //……
  //借用数组原型链上的push方法，完成对增加操作
  Array.prototype.push.apply(this, item); 
};</pre>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	此时类的使用者看到的就是下面这样纸，区别仅仅在于读取用户信息时不需要再借助子属性。回想下通过选择器实例化的jquery对象，再看下这样一个对象，是不是有种豁然开朗的感觉。
</p>
<pre>//实例化一个对象
var myUserList = new USERS();
myUserList.add({'id' : 1001, 'name' : 'Jack', 'age' : 23});
//读取第一条用户信息
console.log(myUserList[0]);</pre>
<p style="text-indent:2em;color:#444444;font-family:'Microsoft Yahei';font-size:14px;background-color:#FFFFFF;">
	可能到了这儿，你感觉利用伪数组降低对象结构深度的意义不大，但对于类的使用者来说，可以用尽可能少的学习成本，来使用尽可能多的经过深度定制的数据类型。
</p>
</div>
</body>
</html>