<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <script type="text/javascript" charset="utf-8" src="../js/jquery-2.1.1.js"></script>
    <title>Blue Sun</title>
    <style>
        /* Blog Articles Template */
        .article_title{
            padding: 50px 20px 10px;
            font-size: 30px;
            font-weight: 400;

            text-align: center;
        }
        .article_info >*{
            display: inline;
        }
        .article_info{
            color: #666;
            display: block;
            text-align: center;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 20px;
        }
        .article_content{
            padding: 40px 40px 50px
        }
        img{
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
<div class="article_title"> 【Kissy WaterFall】实行手动加载数据</div>
<div class="article_info">
    <div class="article_info_date">时间：<span> 2014-9-21 22:44</span></div>
    <div class="article_info_author">作者：<span> JerryC</span></div>
</div>

    <div class="article_content">
        <p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	前言：由于Kissy WaterFall默认是监听滚动事件来实现数据动态加载的，但是有一些情况要用到手动加载数据。以下是使用Kissy WaterFall实现手动加载数据的方法。
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<br />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	最终实现效果：点击”逛更多的商店“会动态加载数据
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<img src="http://img.blog.csdn.net/20130721124107546?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYmx1ZXN1bjg4/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<img src="http://img.blog.csdn.net/20130721124126671?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYmx1ZXN1bjg4/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	步骤：
</p>
<ol style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<li>
		当一页数据加载完成后停止监听滚动事件
		<div class="dp-highlighter bg_javascript" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;margin:18px 0px !important;">
			<div class="bar">
				<div class="tools" style="padding:3px 8px 10px 10px;font-size:9px;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;">
					<b>[javascript]</b>&nbsp;<a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="ViewSource">view plain</a><a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="CopyToClipboard">copy</a><a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="PrintSource">print</a><a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="About">?</a>
					<div>
					</div>
				</div>
			</div>
			<ol class="dp-c" style="color:#5C5C5C;">
				<li class="alt" style="color:inherit;">
					<span style="color:black;background-color:inherit;"><span style="background-color:inherit;">&lt;pre&nbsp;name=</span><span class="string" style="color:blue;background-color:inherit;">"code"</span><span style="background-color:inherit;">&nbsp;</span><span class="keyword" style="color:#006699;font-weight:bold;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span class="string" style="color:blue;background-color:inherit;">"javascript"</span><span style="background-color:inherit;">&gt;&lt;pre&nbsp;name=</span><span class="string" style="color:blue;background-color:inherit;">"code"</span><span style="background-color:inherit;">&nbsp;</span><span class="keyword" style="color:#006699;font-weight:bold;background-color:inherit;">class</span><span style="background-color:inherit;">=</span><span class="string" style="color:blue;background-color:inherit;">"javascript"</span><span style="background-color:inherit;">&gt;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment" style="color:#008200;background-color:inherit;">//加载一页数据完成后触发的事件</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span>
				</li>
				<li class="">
					<span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;waterfall.on(<span class="string" style="color:blue;background-color:inherit;">'addComplete'</span><span style="background-color:inherit;">,&nbsp;</span><span class="keyword" style="color:#006699;font-weight:bold;background-color:inherit;">function</span><span style="background-color:inherit;">&nbsp;()&nbsp;{&nbsp;&nbsp;</span></span>
				</li>
				<li class="alt" style="color:inherit;">
					<span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;S.log(<span class="string" style="color:blue;background-color:inherit;">'after&nbsp;add&nbsp;complete!'</span><span style="background-color:inherit;">);&nbsp;&nbsp;</span></span>
				</li>
				<li class="">
					<span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;waterfall.pause();&nbsp;&nbsp;</span>
				</li>
				<li class="alt" style="color:inherit;">
					<span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span>
				</li>
			</ol>
		</div>
<pre></pre>
<pre></pre>
<br />
	</li>
	<li>
		为按钮绑定重启监听滚动事件
		<div class="dp-highlighter bg_javascript" style="font-family:Consolas, 'Courier New', Courier, mono, serif;font-size:12px;margin:18px 0px !important;">
			<div class="bar">
				<div class="tools" style="padding:3px 8px 10px 10px;font-size:9px;font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;color:silver;">
					<b>[javascript]</b>&nbsp;<a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="ViewSource">view plain</a><a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="CopyToClipboard">copy</a><a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="PrintSource">print</a><a href="http://blog.csdn.net/bluesun88/article/details/9397281#" class="About">?</a>
					<div>
					</div>
				</div>
			</div>
			<ol class="dp-c" style="color:#5C5C5C;">
				<li class="alt" style="color:inherit;">
					<span style="color:black;background-color:inherit;"><span class="comment" style="color:#008200;background-color:inherit;">//加载更多按钮</span><span style="background-color:inherit;">&nbsp;&nbsp;</span></span>
				</li>
				<li class="">
					<span style="color:black;background-color:inherit;">$(<span class="string" style="color:blue;background-color:inherit;">"#button_container_more"</span><span style="background-color:inherit;">).on(</span><span class="string" style="color:blue;background-color:inherit;">'click'</span><span style="background-color:inherit;">,</span><span class="keyword" style="color:#006699;font-weight:bold;background-color:inherit;">function</span><span style="background-color:inherit;">(){&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
				</li>
				<li class="alt" style="color:inherit;">
					<span style="color:black;background-color:inherit;">&nbsp;&nbsp;&nbsp;&nbsp;waterfall.resunme();&nbsp;&nbsp;</span>
				</li>
				<li class="">
					<span style="color:black;background-color:inherit;">});&nbsp;&nbsp;</span>
				</li>
			</ol>
		</div>
<br />
	</li>
	<li>
		附录：waterfall.pause()与water.resunme()的说明（从官网上转载的）<br />
pause()函数和resunme()函数属于插件里的waterfall.loader对象的<br />
resunme() ：继续开始监控scroll事件（随时可能会动态加载）<br />
pause() ：停止监控scroll事件（停止动态加载）<br />
参考网址：<a target="_blank" href="http://docs.kissyui.com/docs/html/api/component/waterfall/loader.html#waterfall.Waterfall.prototype.pause">http://docs.kissyui.com/docs/html/api/component/waterfall/loader.html#waterfall.Waterfall.prototype.pause</a><br />
	</li>
</ol>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<br />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<br />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<br />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<br />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<strong>出现问题：按照以上来完成的话，当点击”加载更多“按钮时，只是启动了滚动监听。意思就是，要加载数据，一要点击按钮，二要再次滚动鼠标。这样的用户体验很差。</strong>
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	<br />
</p>
<p style="font-family:Arial;font-size:14px;background-color:#FFFFFF;">
	解决办法：修改按钮动作：new一个waterfall.loader，重新赋值waterfall对象，再重新绑定addComplete事件。
</p>
    </div>


<!-- 多说评论框 start -->
<div class="ds-thread" data-thread-key="541ee44177d8b1601b193d92" data-title="【Kissy WaterFall】实行手动加载数据" data-url="http://huang-jerryc.com/blog_articles_HTML/541ee44177d8b1601b193d92.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"bluesun"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<!-- 多说公共JS代码 end -->

<!-- BaiDu -->
<script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fb65b3ffc3fd0d14c968e1036793e631b' type='text/javascript'%3E%3C/script%3E"));
    $(function(){$('img[src="http://eiv.baidu.com/hmt/icon/21.gif"]').hide();});
</script>
</body>
</html>